#+title: Rocky
#+description: systemd files and service management

O systemd organiza os services e units em arquivos chamados unit files, como .service e .target

*/usr/lib/systemd/system*
 * Contém os unit files default do sistema, fornecidos pelos pacotes da distribuição
 * Não editar diretamente,

*/etc/systemd/system*
 * Contém unit files personalizados ou sobrescritos
 * Precedence mais alta que */usr/lib/systemd/system*
 * Links simbólicos para targets.

*/run/systemd/system*
 * unit files temporários em runtim
 * apagados ao reiniciar


* service files configuration

*[Unit]* -> descrição (Description=, Requires=, After=)

*[Service]* -> tipo do service (ExecStart, ExecStop=, Restart=)

*[Install]* -> target de instalação (WantedBy=multi-user.target)

Exemplo de override customizado ->
*/etc/systemd/system/sshd.service*

Unit fornecida pelo pacote ->
*/usr/lib/systemd/system/sshd.service*

* targets

no systemd os runlevels tradicionais são substituídos por targets, que agrupam serviços ->

| Runlevel SysV | Target systemd      |
| ------------- | ------------------- |
| 0             | `poweroff.target`   |
| 1             | `rescue.target`     |
| 2,3,4,5       | `multi-user.target` |
| 3 (texto)     | `multi-user.target` |
| 5 (GUI)       | `graphical.target`  |
| 6             | `reboot.target`     |

Targets podem ser visualizados com ->
#+begin_src sh
systemctl list-units --type=target
#+end_src

* systemd configuration files

*/etc/systemd/system.conf* ->
 * Configura parâmetros globais do systemd como limite de tarefas e tempo de timeout

*/etc/systemd/user.conf* ->
 * Configurações para sessões de usuário
   #+begin_src sh
systemd --user
   #+end_src

*/etc/systemd/logind.conf*
 * Configurações de login, suspend, hibernate, timeout de session

*/etc/systemd/journald.conf* ->
